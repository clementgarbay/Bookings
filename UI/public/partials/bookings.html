<div class="row col-sm-12" style="margin-top: 50px;">

  <div ng-if="vm.booking.flight">
    <button type="button" class="close" title="Annuler la réservation du vol" style="margin-right: 5px;" ng-click="vm.clearFlight()">&times; </button>
    <div class="jumbotron">
      <h1>{{vm.booking.flight.departureCity}} > {{vm.booking.flight.arrivalCity}}</h1>
      <p>{{vm.booking.flight.airline}}, {{vm.booking.flight.date | date:"'le' dd/MM/yyyy 'à' hh:mm"}}</p>
      <!--<p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more</a></p>-->
    </div>
  </div>

  <div ng-if="vm.booking.hotel">
    <button type="button" class="close" title="Annuler la réservation de l'hotel'" style="margin-right: 5px;" ng-click="vm.clearHotel()">&times;</button>
    <div class="jumbotron">
      <h1>{{vm.booking.hotel.name}}</h1>
    </div>
  </div>

  <form>

    <div id="flightPanel" ng-if="!vm.booking.flight">
      <div class="form-group">
        <label for="booking_departureCity">Ville de départ</label>
        <ui-select id="booking_departureCity" tagging ng-model="_" on-select="vm.selectDepartureCity($item)">
          <ui-select-match placeholder="Rechercher une ville de départ...">{{$select.selected}}</ui-select-match>
          <ui-select-choices repeat="cityName in vm.departureCities | filter: $select.search track by $index">
            <div>{{cityName}}</div>
          </ui-select-choices>
        </ui-select>
      </div>

      <div class="form-group">
        <label for="booking_arrivalCity">Ville d'arrivée</label>
        <ui-select id="booking_arrivalCity" tagging ng-model="_" ng-disabled="!vm.arrivalCities.length" on-select="vm.selectArrivalCity($item)">
          <ui-select-match placeholder="Rechercher une ville d'arrivée...">{{$select.selected}}</ui-select-match>
          <ui-select-choices repeat="cityName in vm.arrivalCities | filter: $select.search track by $index">
            <div>{{cityName}}</div>
          </ui-select-choices>
        </ui-select>
      </div>

      <div class="form-group row">
        <div class="col-sm-2">
          <label for="booking_nbTickets">Nombre de places</label>
          <input type="number" class="form-control" id="booking_nbTickets" ng-model="vm.booking.nbTickets">
        </div>

        <div class="col-sm-2">
          <label for="booking_date">Date</label>
          <input type="date" class="form-control" id="booking_date" ng-model="vm.booking.date">
        </div>
      </div>

      <flights flights="vm.flights" on-flight-clicked="vm.selectFlight(flight)" ng-show="vm.flights.length"></flights>
    </div>

    <div id="hotelPanel" ng-if="!vm.booking.hotel && vm.booking.flight">
      <hotels hotels="vm.hotels" on-hotel-clicked="vm.selectHotel(hotel)" ng-show="vm.hotels.length"></hotels>
    </div>

    <div id="profilePanel" ng-if="vm.booking.hotel && vm.booking.flight">
      <div class="col-sm-6">
        <label for="booking_lastName">Nom</label>
        <input type="text" class="form-control" id="booking_lastName" ng-model="vm.booking.lastName">
      </div>

      <div class="col-sm-6">
        <label for="booking_firstName">Prénom</label>
        <input type="text" class="form-control" id="booking_firstName" ng-model="vm.booking.firstName">
      </div>

      <div class="text-center" style="margin: 60px 0;" ng-disabled="!vm.booking.lastName || !vm.booking.firstName">
        <button type="submit" class="btn btn-success btn-lg" ng-click="vm.saveBooking()">Valider</button>
      </div>
    </div>

  </form>
  
</div>
